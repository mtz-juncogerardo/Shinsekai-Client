(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"6V1l":function(e,t,i){"use strict";i.r(t),i.d(t,"AdminPanelModule",function(){return oe});var n=i("ofXK"),a=i("mrSG"),o=i("fXoL"),s=i("8OjO"),r=i("n90K"),c=i("tyNb"),l=i("3LUQ"),d=i("5dVO"),b=i("3Pt+"),h=i("tk/3");let u=(()=>{class e{constructor(e,t){this.crud=e,this.storage=t,this.path=""}uploadFile(e){console.log("file",e),this.crud.setEndpoint("images");const t=new FormData;return t.append("myFile",e,e.name),console.log("formdata",t),this.crud.httpUpload(t,this.storage.getKey())}deletePromotionsImage(e){this.crud.setEndpoint("images");const t=e.split("/")[4];console.log(t),this.crud.httpDelete(`?blob=${t}`).toPromise().then(e=>console.log(e.response))}deleteImages(e){void 0!==e&&(this.crud.setEndpoint("images"),e.forEach(e=>{var t;const i=null===(t=null==e?void 0:e.path)||void 0===t?void 0:t.split(".");this.crud.httpDelete(`?blob=${null==e?void 0:e.id}.${i?i[i.length-1]:[]}`).toPromise().then(e=>console.log(e.response))}))}}return e.\u0275fac=function(t){return new(t||e)(o.Sb(s.a),o.Sb(r.a))},e.\u0275prov=o.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function g(e,t){if(1&e){const e=o.Pb();o.Ob(0,"tr"),o.Ob(1,"td"),o.ic(2),o.Nb(),o.Ob(3,"td"),o.ic(4),o.Nb(),o.Ob(5,"td"),o.ic(6),o.Nb(),o.Ob(7,"td"),o.ic(8),o.Nb(),o.Ob(9,"td"),o.ic(10),o.Nb(),o.Ob(11,"td"),o.ic(12),o.Nb(),o.Ob(13,"td"),o.ic(14),o.Nb(),o.Ob(15,"td"),o.ic(16),o.Nb(),o.Ob(17,"td"),o.Ob(18,"div",76),o.Ob(19,"i",77),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().readArticle(i.id,i.name)}),o.Nb(),o.Ob(20,"i",78),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().getArticleCombos(i.id)}),o.Nb(),o.Ob(21,"i",79),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().selectArticle(i.id,i.name)}),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(e.name),o.yb(2),o.kc("",e.height," cm"),o.yb(2),o.kc("$",e.price," MXN"),o.yb(2),o.kc("$",e.discountPrice," MXN"),o.yb(2),o.jc(e.stock),o.yb(2),o.jc(e.originalFlag?"Si":"No"),o.yb(2),o.jc(e.details),o.yb(2),o.jc(e.timesSold)}}function m(e,t){if(1&e&&(o.Ob(0,"div",80),o.Kb(1,"img",81),o.Nb()),2&e){const e=t.$implicit;o.yb(1),o.ac("src",e.path,o.fc)}}function p(e,t){if(1&e&&(o.Ob(0,"option",86),o.ic(1),o.Nb()),2&e){const e=t.$implicit,i=o.Xb(2);let n=null;o.ac("value",e.id)("selected",(null==(n=i.form.get("originalSerial"))?null:n.value)===e.id),o.yb(1),o.jc(e.name)}}function f(e,t){if(1&e){const e=o.Pb();o.Ob(0,"div",29),o.Ob(1,"label",82),o.ic(2,"Selecciona el Original:"),o.Nb(),o.Kb(3,"br"),o.Ob(4,"select",83,84),o.Vb("change",function(){o.ec(e);const t=o.dc(5);return o.Xb().addOriginal(t.value)}),o.Ob(6,"option",51),o.ic(7,"---Sin Original---"),o.Nb(),o.hc(8,p,2,3,"option",85),o.Nb(),o.Ob(9,"small"),o.ic(10,"Si no tiene un original dejar vacio"),o.Nb(),o.Nb()}if(2&e){const e=o.Xb();o.yb(8),o.ac("ngForOf",e.originalArticles)}}function O(e,t){if(1&e&&(o.Ob(0,"option",87),o.ic(1),o.Nb()),2&e){const e=t.$implicit;o.ac("value",e.id+","+e.name),o.yb(1),o.jc(e.name)}}function P(e,t){if(1&e){const e=o.Pb();o.Ob(0,"div",88),o.Ob(1,"span",89),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().removeTag("anime",i.id)}),o.ic(2),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(e.name)}}function N(e,t){if(1&e&&(o.Ob(0,"option",87),o.ic(1),o.Nb()),2&e){const e=t.$implicit;o.ac("value",e.id+","+e.name),o.yb(1),o.jc(e.name)}}function y(e,t){if(1&e){const e=o.Pb();o.Ob(0,"div",88),o.Ob(1,"span",89),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().removeTag("line",i.id)}),o.ic(2),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(e.name)}}function v(e,t){if(1&e){const e=o.Pb();o.Ob(0,"option",90),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().addTag("material",i)}),o.ic(1),o.Nb()}if(2&e){const e=t.$implicit;o.ac("value",e.id+","+e.name),o.yb(1),o.jc(e.name)}}function C(e,t){if(1&e){const e=o.Pb();o.Ob(0,"div",88),o.Ob(1,"span",89),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().removeTag("material",i.id)}),o.ic(2),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(e.name)}}function M(e,t){if(1&e){const e=o.Pb();o.Ob(0,"option",90),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().addTag("brand",i)}),o.ic(1),o.Nb()}if(2&e){const e=t.$implicit;o.ac("value",e.id+","+e.name),o.yb(1),o.jc(e.name)}}function _(e,t){if(1&e){const e=o.Pb();o.Ob(0,"div",88),o.Ob(1,"span",89),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().removeTag("brand",i.id)}),o.ic(2),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(e.name)}}function k(e,t){1&e&&o.Kb(0,"i",94)}function w(e,t){if(1&e){const e=o.Pb();o.Ob(0,"div",91),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().removeImagePath(i)}),o.Kb(1,"img",92),o.hc(2,k,1,0,"i",93),o.Nb()}if(2&e){const e=t.$implicit,i=o.Xb();o.yb(1),o.ac("src",e.path,o.fc),o.yb(1),o.ac("ngIf",e.path!==i.loadingGif)}}let x=(()=>{class e{constructor(e,t,i,n,a,s){this.formBuilder=e,this.crud=t,this.storage=i,this.loader=n,this.alert=a,this.imageBlob=s,this.crud.setEndpoint("articles"),this.crud.setBearer(this.storage.getKey()),this.loadingGif="assets/loading.gif",this.originalArticles=[],this.imagePaths=[],this.blockButton=!1,this.creatingTag=!1,this.inputPage=1,this.selectedArticle={id:"",name:""},this.editFlag=!1,this.dateAdded="",this.selectedAnimes=[],this.selectedLines=[],this.selectedMaterials=[],this.selectedBrands=[],this.animes=[],this.lines=[],this.materials=[],this.brands=[],this.originalSerial="",this.search="",this.articles=[],this.maxPage=1,this.page=1,this.searchInput="",this.articleRefresh=new o.n,this.searchDetected=new o.n,this.form=this.formBuilder.group({id:[null],name:[null,b.p.required],details:[null,b.p.required],height:[null,b.p.required],price:[null,b.p.required],discountPrice:[0],stock:[null,b.p.required],originalFlag:[!1],originalSerial:[null],images:[[]],brandId:[null],materials:[[]],lines:[[]],animes:[[]]})}ngOnInit(){this.searchInput=this.search,0!==this.articles.length?this.inputPage=this.page:this.getArticles()}getArticles(e=""){this.crud.setEndpoint("articles"),this.searchInput&&!e&&(e=this.searchInput),this.searchDetected.emit(e),this.loader.beginLoad(),this.crud.httpGet(`?page=${this.page}&search=${e}`).toPromise().then(e=>{this.articleRefresh.emit(e),this.loader.endLoad()})}searchArticles(e={}){Object.keys(e).length>0&&13!==e.keyCode||this.search===this.searchInput||(this.page=0,this.inputPage=1,this.getArticles(this.searchInput))}nextPage(){this.inputPage>this.maxPage||this.page===this.inputPage?this.loader.endLoad():(this.page=this.inputPage,this.getArticles())}delete(e){return Object(a.a)(this,void 0,void 0,function*(){this.loader.beginLoad(),this.crud.setEndpoint("articles"),yield this.crud.httpDelete(`?id=${e}`).toPromise().then(t=>{t.response&&(this.alert.pushAlert({type:"success",message:"Articulo eliminado con exito"}),this.articles=this.articles.filter(t=>t.id!==e),this.articleRefresh.emit({response:this.articles,page:this.page,maxPage:this.maxPage}))}).finally(()=>this.loader.endLoad())})}selectArticle(e,t){this.selectedArticle={id:e,name:t}}readArticle(e,t){this.crud.setEndpoint("articles/read"),this.crud.httpGet(`?id=${e}`).toPromise().then(e=>{var t,i,n,a;const o=e.response;this.dateAdded=void 0!==o.dateAdded?new Date(o.dateAdded.toLocaleString()).toString():"10-09-1992",this.animes=(null===(t=o.animes)||void 0===t?void 0:t.map(e=>e.name))||["N/A"],this.lines=(null===(i=o.lines)||void 0===i?void 0:i.map(e=>e.name))||["N/A"],this.materials=(null===(n=o.materials)||void 0===n?void 0:n.map(e=>e.name))||["N/A"],this.brands=(null===(a=o.brand)||void 0===a?void 0:a.map(e=>e.name))||["N/A"],this.originalSerial=o.originalSerial||"N/A",this.imagePaths=o.images}),this.selectedArticle={id:e,name:t}}submit(){var e,t,i,n;return Object(a.a)(this,void 0,void 0,function*(){if(this.form.invalid)return;const a=null===(e=this.form.get("originalFlag"))||void 0===e?void 0:e.value,o=null===(t=this.form.get("discountPrice"))||void 0===t?void 0:t.value;if(0!==this.imagePaths.length){if(this.loader.beginLoad(),this.form.patchValue({images:this.imagePaths,animes:this.selectedAnimes,brandId:void 0!==(null===(i=this.selectedBrands[0])||void 0===i?void 0:i.id)?null===(n=this.selectedBrands[0])||void 0===n?void 0:n.id:null,lines:this.selectedLines,materials:this.selectedMaterials,originalFlag:a||!1,discountPrice:o||0}),console.log(this.form.value),this.editFlag)return this.crud.setEndpoint("articles/update"),void(yield this.crud.httpPut(this.form.value).toPromise().then(e=>{e.response&&(this.alert.pushAlert({type:"success",message:"El articulo se actualizo con exito"}),this.articles=this.articles.filter(t=>t.id!==e.response.id),this.articles.unshift(e.response),this.articleRefresh.emit({response:this.articles,page:this.page,maxPage:this.maxPage}))}).finally(()=>this.loader.endLoad()));this.crud.setEndpoint("articles/create"),yield this.crud.httpPost(this.form.value).toPromise().then(e=>{e.response&&(this.alert.pushAlert({type:"success",message:"El articulo se guardo con exito"}),this.articles.unshift(e.response),this.articleRefresh.emit({response:this.articles,page:this.page,maxPage:this.maxPage}))}).finally(()=>this.loader.endLoad())}else this.alert.pushAlert({type:"warning",message:"Tu articulo necesita al menos una imagen"})})}loadImage(e){if(0===e.target.files.length)return;const t=e.target.files[0];this.imagePaths.push({id:"gif",path:this.loadingGif}),this.blockButton=!0;const i=this.imageBlob.uploadFile(t).subscribe(e=>{if(e.type===h.c.UploadProgress){const t=Math.round(100*e.loaded/e.total);console.log("progress",t)}else if(e.type===h.c.Response){this.imagePaths.pop(),this.blockButton=!1,i.unsubscribe();const t=e.body.response;t.order=Date.now(),this.imagePaths.push(t),console.log(this.imagePaths)}})}removeImagePath(e){(null==e?void 0:e.path)!==this.loadingGif?(this.imagePaths=this.imagePaths.filter(t=>t.path!==(null==e?void 0:e.path)),this.imageBlob.deleteImages([e])):console.log(e)}deleteImages(){this.editFlag||(this.form.reset(),this.imageBlob.deleteImages(this.imagePaths),this.imagePaths=[])}getArticleCombos(e=""){return Object(a.a)(this,void 0,void 0,function*(){e&&(this.editFlag=!0),this.form.reset(),this.selectedBrands=[],this.selectedMaterials=[],this.selectedAnimes=[],this.selectedLines=[],this.imagePaths=[],this.editFlag=!!e,this.crud.setEndpoint("articles/originals"),yield this.crud.httpGet().toPromise().then(e=>this.originalArticles=e.response),this.crud.setEndpoint("tags"),this.crud.httpGet("?byAnime=true").toPromise().then(e=>this.animes=e.response),this.crud.httpGet("?byMaterial=true").toPromise().then(e=>this.materials=e.response),this.crud.httpGet("?byLine=true").toPromise().then(e=>this.lines=e.response),this.crud.httpGet("?byBrand=true").toPromise().then(e=>this.brands=e.response),this.editFlag&&(this.crud.setEndpoint("articles/read?id="),this.crud.httpGet(e).toPromise().then(e=>{this.populateForm(e.response)}))})}addTag(e,t,i=!1){const n=t.split(","),a={id:n[0],name:n[1]};switch(e){case"anime":if(this.selectedAnimes.find(e=>e.id===a.id))return;break;case"material":if(this.selectedMaterials.find(e=>e.id===a.id))return;break;case"line":if(this.selectedLines.find(e=>e.id===a.id))return;break;case"brand":if(this.selectedBrands.find(e=>e.id===a.id))return}switch(e){case"anime":this.selectedAnimes.push(a),i&&this.animes.push(a);break;case"material":this.selectedMaterials.push(a),i&&this.materials.push(a);break;case"line":this.selectedLines.push(a),i&&this.lines.push(a);break;case"brand":this.selectedBrands.push(a),i&&this.brands.push(a)}}addOriginal(e){this.form.patchValue({originalSerial:e})}createTag(e,t,i){if(13===i.keyCode&&!this.creatingTag&&t){if(this.creatingTag=!0,"anime"===e)return this.animes.find(e=>e.name.toLowerCase()===t.toLowerCase())?(this.alert.pushAlert({type:"warning",message:"El tag ya existe, intenta seleccionarlo desde el menu"}),void(this.creatingTag=!1)):(this.crud.setEndpoint("tags/anime/create"),void this.crud.httpPost({name:t}).toPromise().then(e=>this.addTag("anime",`${e.response.id},${e.response.name}`,!0)).finally(()=>this.creatingTag=!1));if("material"===e)return this.materials.find(e=>e.name.toLowerCase()===t.toLowerCase())?(this.alert.pushAlert({type:"warning",message:"El tag ya existe, intenta seleccionarlo desde el menu"}),void(this.creatingTag=!1)):(this.crud.setEndpoint("tags/material/create"),void this.crud.httpPost({name:t}).toPromise().then(e=>this.addTag("material",`${e.response.id},${e.response.name}`,!0)).finally(()=>this.creatingTag=!1));if("line"===e)return this.lines.find(e=>e.name.toLowerCase()===t.toLowerCase())?(this.alert.pushAlert({type:"warning",message:"El tag ya existe, intenta seleccionarlo desde el menu"}),void(this.creatingTag=!1)):(this.crud.setEndpoint("tags/line/create"),void this.crud.httpPost({name:t}).toPromise().then(e=>this.addTag("line",`${e.response.id},${e.response.name}`,!0)).finally(()=>this.creatingTag=!1));if("brand"===e)return this.brands.find(e=>e.name.toLowerCase()===t.toLowerCase())?(this.alert.pushAlert({type:"warning",message:"El tag ya existe, intenta seleccionarlo desde el menu"}),void(this.creatingTag=!1)):(this.crud.setEndpoint("tags/brand/create"),void this.crud.httpPost({name:t}).toPromise().then(e=>this.addTag("brand",`${e.response.id},${e.response.name}`,!0)).finally(()=>this.creatingTag=!1));this.creatingTag=!1}}removeTag(e,t){switch(e){case"anime":this.selectedAnimes=this.selectedAnimes.filter(e=>e.id!==t);break;case"material":this.selectedMaterials=this.selectedMaterials.filter(e=>e.id!==t);break;case"line":this.selectedLines=this.selectedLines.filter(e=>e.id!==t);break;case"brand":this.selectedBrands=this.selectedBrands.filter(e=>e.id!==t)}}populateForm(e){this.selectedBrands=e.brand,this.selectedLines=e.lines,this.selectedAnimes=e.animes,this.selectedMaterials=e.materials,this.imagePaths=e.images,this.form.patchValue({id:null==e?void 0:e.id,name:null==e?void 0:e.name,details:null==e?void 0:e.details,height:null==e?void 0:e.height,price:null==e?void 0:e.price,discountPrice:null==e?void 0:e.discountPrice,stock:null==e?void 0:e.stock,originalFlag:null==e?void 0:e.originalFlag,originalSerial:null==e?void 0:e.originalSerial,images:null==e?void 0:e.images,brandId:null==e?void 0:e.brand[0].id,materials:null==e?void 0:e.materials,lines:null==e?void 0:e.lines,animes:null==e?void 0:e.animes})}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(b.c),o.Jb(s.a),o.Jb(r.a),o.Jb(d.a),o.Jb(l.a),o.Jb(u))},e.\u0275cmp=o.Db({type:e,selectors:[["app-articles"]],inputs:{maxPage:"maxPage",page:"page",search:"search",articles:"articles"},outputs:{articleRefresh:"articleRefresh",searchDetected:"searchDetected"},decls:196,vars:29,consts:[[1,"wrapper"],[1,"header"],["placeholder","Buscar",3,"ngModel","keyup","ngModelChange"],[1,"btn","btn-outline-success",3,"click"],["data-bs-toggle","modal","data-bs-target","#createModal",1,"btn","btn-success","add",3,"click"],["id","articles",1,"table","table-striped"],[1,"bg-info"],[4,"ngFor","ngForOf"],[1,"pagination"],["name","page","type","number","min","1",3,"ngModel","max","ngModelChange"],[1,"fas","fa-arrow-circle-right",3,"click"],["id","deleteConfirm","tabindex","-1","aria-labelledby","delete","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","delete",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","readModal","tabindex","-1","aria-labelledby","read","aria-hidden","true",1,"modal","fade"],["id","read",1,"modal-title"],[1,"d-flex","flex-wrap"],["class","images",4,"ngFor","ngForOf"],["id","createModal","tabindex","-1","aria-labelledby","create","aria-hidden","true",1,"modal","fade"],["id","create",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup"],[1,"form-group"],["for","name"],["max","50","formControlName","name","type","text","id","name","placeholder","Naruto Uzumaki Figure",1,"form-control"],["for","details"],["maxlength","200","formControlName","details","type","text","id","details","rows","8",1,"form-control"],["for","height"],["formControlName","height","type","number","id","height","step","0.01","placeholder","1.75",1,"form-control"],["for","price"],["formControlName","price","type","number","id","price","step","0.01","placeholder","1500.00",1,"form-control"],["for","discountPrice"],["formControlName","discountPrice","type","number","id","discountPrice","step","0.1","placeholder","100.00",1,"form-control"],["for","stock"],["formControlName","stock","type","number","id","stock","step","1","placeholder","1",1,"form-control"],[1,"form-group","pt-3","pb-3"],["for","originalFlag",1,"mr-5"],["formControlName","originalFlag","type","checkbox","id","originalFlag"],["class","form-group",4,"ngIf"],["for","animes"],["type","text","autocomplete","off","id","animes",1,"form-control",3,"keyup"],["anime",""],["name","anime","id","anime",3,"change"],["animeSelect",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","combo",4,"ngFor","ngForOf"],["for","lines"],["type","text","autocomplete","off","id","lines",1,"form-control",3,"keyup"],["line",""],["name","line","id","line",3,"change"],["lineSelect",""],["for","materials"],["type","text","autocomplete","off","id","materials",1,"form-control",3,"keyup"],["material",""],["name","material","id","material",3,"change"],["materialSelect",""],[3,"value","click",4,"ngFor","ngForOf"],["for","brands"],["type","text","autocomplete","off","id","brands",1,"form-control",3,"keyup"],["brand",""],["name","brand","id","brand",3,"change"],["brandSelect",""],[1,"pt-3","pb-3","form-group"],["for","images"],["id","images","type","file","name","myImage","accept","image/*",3,"change"],["class","images",3,"click",4,"ngFor","ngForOf"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],[1,"options"],["data-bs-toggle","modal","data-bs-target","#readModal",1,"far","fa-eye",3,"click"],["data-bs-toggle","modal","data-bs-target","#createModal",1,"fas","fa-pen",3,"click"],["data-bs-toggle","modal","data-bs-target","#deleteConfirm",1,"fas","fa-trash",3,"click"],[1,"images"],["alt","imagen de articulo",3,"src"],["for","originalSerial"],["name","original","id","originalSerial",3,"change"],["originalSelect",""],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[3,"value"],[1,"combo"],[1,"badge","rounded-pill","bg-primary",3,"click"],[3,"value","click"],[1,"images",3,"click"],["alt","loading",3,"src"],["class","fas fa-trash",4,"ngIf"],[1,"fas","fa-trash"]],template:function(e,t){if(1&e){const e=o.Pb();o.Ob(0,"div",0),o.Ob(1,"div",1),o.Ob(2,"input",2),o.Vb("keyup",function(e){return t.searchArticles(e)})("ngModelChange",function(e){return t.searchInput=e}),o.Nb(),o.Ob(3,"button",3),o.Vb("click",function(){return t.searchArticles()}),o.ic(4,"Buscar"),o.Nb(),o.Ob(5,"button",4),o.Vb("click",function(){return t.getArticleCombos()}),o.ic(6," + Agregar Nuevo Articulo "),o.Nb(),o.Nb(),o.Ob(7,"table",5),o.Ob(8,"thead",6),o.Ob(9,"tr"),o.Ob(10,"th"),o.ic(11,"Nombre"),o.Nb(),o.Ob(12,"th"),o.ic(13,"Altura"),o.Nb(),o.Ob(14,"th"),o.ic(15,"Precio"),o.Nb(),o.Ob(16,"th"),o.ic(17,"Descuento"),o.Nb(),o.Ob(18,"th"),o.ic(19,"Stock"),o.Nb(),o.Ob(20,"th"),o.ic(21,"Es Original?"),o.Nb(),o.Ob(22,"th"),o.ic(23,"Descripci\xf3n"),o.Nb(),o.Ob(24,"th"),o.ic(25,"# de Compras"),o.Nb(),o.Ob(26,"th"),o.ic(27,"Options"),o.Nb(),o.Nb(),o.Nb(),o.Ob(28,"tbody"),o.hc(29,g,22,8,"tr",7),o.Nb(),o.Nb(),o.Ob(30,"div",8),o.ic(31," Pagina: "),o.Ob(32,"input",9),o.Vb("ngModelChange",function(e){return t.inputPage=e}),o.Nb(),o.ic(33),o.Ob(34,"i",10),o.Vb("click",function(){return t.nextPage()}),o.Nb(),o.Nb(),o.Nb(),o.Ob(35,"div",11),o.Ob(36,"div",12),o.Ob(37,"div",13),o.Ob(38,"div",14),o.Ob(39,"h5",15),o.ic(40),o.Nb(),o.Kb(41,"button",16),o.Nb(),o.Ob(42,"div",17),o.ic(43," Esta acci\xf3n no se puede deshacer. "),o.Nb(),o.Ob(44,"div",18),o.Ob(45,"button",19),o.ic(46,"No, Quiero conservarlo"),o.Nb(),o.Ob(47,"button",20),o.Vb("click",function(){return t.delete(t.selectedArticle.id)}),o.ic(48," Si, Eliminalo! "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Ob(49,"div",21),o.Ob(50,"div",12),o.Ob(51,"div",13),o.Ob(52,"div",14),o.Ob(53,"h5",22),o.ic(54),o.Nb(),o.Kb(55,"button",16),o.Nb(),o.Ob(56,"div",17),o.Ob(57,"dl"),o.Ob(58,"dt"),o.ic(59,"ID"),o.Nb(),o.Ob(60,"dd"),o.ic(61),o.Nb(),o.Ob(62,"dt"),o.ic(63,"Fecha en que se agrego"),o.Nb(),o.Ob(64,"dd"),o.ic(65),o.Nb(),o.Ob(66,"dt"),o.ic(67,"Anime"),o.Nb(),o.Ob(68,"dd"),o.ic(69),o.Nb(),o.Ob(70,"dt"),o.ic(71,"Lineas"),o.Nb(),o.Ob(72,"dd"),o.ic(73),o.Nb(),o.Ob(74,"dt"),o.ic(75,"Material"),o.Nb(),o.Ob(76,"dd"),o.ic(77),o.Nb(),o.Ob(78,"dt"),o.ic(79,"Marcas"),o.Nb(),o.Ob(80,"dd"),o.ic(81),o.Nb(),o.Ob(82,"dt"),o.ic(83,"Id del articulo orignal"),o.Nb(),o.Ob(84,"dd"),o.ic(85),o.Nb(),o.Ob(86,"dt"),o.ic(87,"Imagenes"),o.Nb(),o.Ob(88,"div",23),o.hc(89,m,2,1,"div",24),o.Nb(),o.Nb(),o.Nb(),o.Ob(90,"div",18),o.Ob(91,"button",19),o.ic(92,"Cerrar"),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Ob(93,"div",25),o.Ob(94,"div",12),o.Ob(95,"div",13),o.Ob(96,"div",14),o.Ob(97,"h5",26),o.ic(98),o.Nb(),o.Ob(99,"button",27),o.Vb("click",function(){return t.deleteImages()}),o.Nb(),o.Nb(),o.Ob(100,"div",17),o.Ob(101,"form",28),o.Ob(102,"div",29),o.Ob(103,"label",30),o.ic(104,"Nombre:"),o.Nb(),o.Kb(105,"input",31),o.Nb(),o.Ob(106,"div",29),o.Ob(107,"label",32),o.ic(108,"Descripci\xf3n:"),o.Nb(),o.Kb(109,"textarea",33),o.Nb(),o.Ob(110,"div",29),o.Ob(111,"label",34),o.ic(112,"Altura en centimetros:"),o.Nb(),o.Kb(113,"input",35),o.Nb(),o.Ob(114,"div",29),o.Ob(115,"label",36),o.ic(116,"Precio en MXN:"),o.Nb(),o.Kb(117,"input",37),o.Nb(),o.Ob(118,"div",29),o.Ob(119,"label",38),o.ic(120,"Descuento:"),o.Nb(),o.Kb(121,"input",39),o.Ob(122,"small"),o.ic(123,"El total descrito aqui se descontara del total de precio"),o.Nb(),o.Nb(),o.Ob(124,"div",29),o.Ob(125,"label",40),o.ic(126,"Stock:"),o.Nb(),o.Kb(127,"input",41),o.Nb(),o.Ob(128,"div",42),o.Ob(129,"label",43),o.ic(130,"Es original?"),o.Nb(),o.Kb(131,"input",44),o.Nb(),o.hc(132,f,11,1,"div",45),o.Ob(133,"div",29),o.Ob(134,"label",46),o.ic(135,"Anime:"),o.Nb(),o.Ob(136,"input",47,48),o.Vb("keyup",function(i){o.ec(e);const n=o.dc(137);return t.createTag("anime",n.value,i)}),o.Nb(),o.Ob(138,"select",49,50),o.Vb("change",function(){o.ec(e);const i=o.dc(139);return t.addTag("anime",i.value)}),o.Ob(140,"option",51),o.ic(141,"---Selecciona uno para agregar---"),o.Nb(),o.hc(142,O,2,2,"option",52),o.Nb(),o.Ob(143,"small"),o.ic(144,"Escribe y presiona Enter para agregar un nuevo tag"),o.Nb(),o.hc(145,P,3,1,"div",53),o.Nb(),o.Ob(146,"div",29),o.Ob(147,"label",54),o.ic(148,"Lineas:"),o.Nb(),o.Ob(149,"input",55,56),o.Vb("keyup",function(i){o.ec(e);const n=o.dc(150);return t.createTag("line",n.value,i)}),o.Nb(),o.Ob(151,"select",57,58),o.Vb("change",function(){o.ec(e);const i=o.dc(152);return t.addTag("line",i.value)}),o.Ob(153,"option",51),o.ic(154,"---Selecciona uno para agregar---"),o.Nb(),o.hc(155,N,2,2,"option",52),o.Nb(),o.Ob(156,"small"),o.ic(157,"Escribe y presiona Enter para agregar un nuevo tag"),o.Nb(),o.hc(158,y,3,1,"div",53),o.Nb(),o.Ob(159,"div",29),o.Ob(160,"label",59),o.ic(161,"Material:"),o.Nb(),o.Ob(162,"input",60,61),o.Vb("keyup",function(i){o.ec(e);const n=o.dc(163);return t.createTag("material",n.value,i)}),o.Nb(),o.Ob(164,"select",62,63),o.Vb("change",function(){o.ec(e);const i=o.dc(165);return t.addTag("material",i.value)}),o.Ob(166,"option",51),o.ic(167,"---Selecciona uno para agregar---"),o.Nb(),o.hc(168,v,2,2,"option",64),o.Nb(),o.hc(169,C,3,1,"div",53),o.Ob(170,"small"),o.ic(171,"Escribe y presiona Enter para agregar un nuevo tag"),o.Nb(),o.Nb(),o.Ob(172,"div",29),o.Ob(173,"label",65),o.ic(174,"Marcas:"),o.Nb(),o.Ob(175,"input",66,67),o.Vb("keyup",function(i){o.ec(e);const n=o.dc(176);return t.createTag("brand",n.value,i)}),o.Nb(),o.Ob(177,"select",68,69),o.Vb("change",function(){o.ec(e);const i=o.dc(178);return t.addTag("brand",i.value)}),o.Ob(179,"option",51),o.ic(180,"---Selecciona uno para agregar---"),o.Nb(),o.hc(181,M,2,2,"option",64),o.Nb(),o.hc(182,_,3,1,"div",53),o.Ob(183,"small"),o.ic(184,"Escribe y presiona Enter para agregar un nuevo tag"),o.Nb(),o.Nb(),o.Ob(185,"div",70),o.Ob(186,"label",71),o.ic(187,"Imagenes:"),o.Nb(),o.Ob(188,"input",72),o.Vb("change",function(e){return t.loadImage(e)}),o.Nb(),o.Nb(),o.Ob(189,"div",23),o.hc(190,w,3,2,"div",73),o.Nb(),o.Nb(),o.Ob(191,"div",18),o.Ob(192,"button",74),o.Vb("click",function(){return t.submit()}),o.ic(193),o.Nb(),o.Ob(194,"button",75),o.Vb("click",function(){return t.deleteImages()}),o.ic(195," Cerrar "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){let e=null;o.yb(2),o.ac("ngModel",t.searchInput),o.yb(27),o.ac("ngForOf",t.articles),o.yb(3),o.ac("ngModel",t.inputPage)("max",t.maxPage),o.yb(1),o.kc(" De: ",t.maxPage," "),o.yb(7),o.kc("\xbfEstas apunto de eliminar: ",t.selectedArticle.name,"?"),o.yb(14),o.jc(t.selectedArticle.name),o.yb(7),o.jc(t.selectedArticle.id),o.yb(4),o.jc(t.dateAdded),o.yb(4),o.jc(t.animes.join(" | ")),o.yb(4),o.jc(t.lines.join(" | ")),o.yb(4),o.jc(t.materials.join(" | ")),o.yb(4),o.jc(t.brands.join(" | ")),o.yb(4),o.jc(t.originalSerial),o.yb(4),o.ac("ngForOf",t.imagePaths),o.yb(9),o.jc(t.editFlag?"Editando Articulo":"Nuevo Articulo"),o.yb(3),o.ac("formGroup",t.form),o.yb(31),o.ac("ngIf",!(null!=(e=t.form.get("originalFlag"))&&e.value)),o.yb(10),o.ac("ngForOf",t.animes),o.yb(3),o.ac("ngForOf",t.selectedAnimes),o.yb(10),o.ac("ngForOf",t.lines),o.yb(3),o.ac("ngForOf",t.selectedLines),o.yb(10),o.ac("ngForOf",t.materials),o.yb(1),o.ac("ngForOf",t.selectedMaterials),o.yb(12),o.ac("ngForOf",t.brands),o.yb(1),o.ac("ngForOf",t.selectedBrands),o.yb(8),o.ac("ngForOf",t.imagePaths),o.yb(2),o.ac("disabled",t.form.invalid||t.blockButton),o.yb(1),o.kc(" ",t.editFlag?"Actualizar":"Guardar"," ")}},directives:[b.b,b.h,b.j,n.i,b.l,b.q,b.i,b.e,b.d,b.g,b.a,n.j,b.k,b.r],styles:[".wrapper[_ngcontent-%COMP%]{overflow-x:auto}select[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{margin-right:1rem}small[_ngcontent-%COMP%]{color:#e62121}span[_ngcontent-%COMP%]{background:grey;font-size:.875rem;margin:.125rem}.combo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.combo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:red}.images[_ngcontent-%COMP%]{cursor:pointer;height:8rem;margin:.5rem;position:relative;width:6rem}.images[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{color:#e62121}.images[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;left:0;margin:50% auto;position:absolute;right:0;text-align:center}.images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:contain;width:100%}.pagination[_ngcontent-%COMP%]{align-items:center;display:flex;margin:1rem 0;-webkit-user-select:none;user-select:none}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 .5rem;width:3rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.5rem;margin-left:.5rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}.header[_ngcontent-%COMP%]{display:flex;padding:1rem}.header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 2rem}.header[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{margin-left:auto}.options[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.25rem;margin:0 .5rem}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}"]}),e})();function F(e,t){if(1&e){const e=o.Pb();o.Ob(0,"tr"),o.Ob(1,"td"),o.ic(2),o.Nb(),o.Ob(3,"td"),o.ic(4),o.Nb(),o.Ob(5,"td"),o.ic(6),o.Nb(),o.Ob(7,"td"),o.ic(8),o.Nb(),o.Ob(9,"td"),o.ic(10),o.Nb(),o.Ob(11,"td"),o.ic(12),o.Nb(),o.Ob(13,"td"),o.Ob(14,"div",14),o.Ob(15,"input",15),o.Vb("click",function(i){o.ec(e);const n=t.$implicit;return o.Xb().setUser(n,i)}),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(e.name),o.yb(2),o.jc(e.email),o.yb(2),o.jc(e.phone),o.yb(2),o.jc(e.address),o.yb(2),o.jc(e.city),o.yb(2),o.jc(e.postalCode),o.yb(3),o.ac("checked",e.admin)("value",e.admin)}}let A=(()=>{class e{constructor(e,t,i,n){this.crud=e,this.storage=t,this.alert=i,this.loader=n,this.crud.setEndpoint("admin/users"),this.users=[],this.selectedUser={},this.query=""}ngOnInit(){this.loader.beginLoad(),this.getUsers()}getUsers(){this.crud.httpGet().toPromise().then(e=>this.users=e.response).finally(()=>this.loader.endLoad())}toggleAdmin(){1===this.users.filter(e=>e.admin).length&&this.selectedUser.admin?this.alert.pushAlert({type:"danger",message:"Debe haber almenos un usuario con permisos de administrador"}):(this.selectedUser.admin=!this.selectedUser.admin,this.crud.httpPut(this.selectedUser).toPromise().then(e=>{e.response&&(this.alert.pushAlert({type:"success",message:e.response}),this.users.map(e=>e.id===this.selectedUser.id?this.selectedUser:e))}))}setUser(e,t){t.preventDefault(),this.selectedUser=e,this.query=this.selectedUser.admin?`Estas a punto de retirarle a ${e.name?e.name:e.email} sus permisos para administrar la tienda.`:`Estas a punto de darle permisos de administrador a ${e.name?e.name:e.email}`}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(s.a),o.Jb(r.a),o.Jb(l.a),o.Jb(d.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-users"]],decls:34,vars:2,consts:[[1,"wrapper"],["id","articles",1,"table","table-striped"],[1,"bg-info"],[4,"ngFor","ngForOf"],["id","confirm","tabindex","-1","aria-labelledby","confirmModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","confirmModal",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["data-bs-toggle","modal","data-bs-target","#confirm"],["type","checkbox",3,"checked","value","click"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"table",1),o.Ob(2,"thead",2),o.Ob(3,"tr"),o.Ob(4,"th"),o.ic(5,"Nombre"),o.Nb(),o.Ob(6,"th"),o.ic(7,"Email"),o.Nb(),o.Ob(8,"th"),o.ic(9,"Telefono"),o.Nb(),o.Ob(10,"th"),o.ic(11,"Direcci\xf3n"),o.Nb(),o.Ob(12,"th"),o.ic(13,"Ciudad"),o.Nb(),o.Ob(14,"th"),o.ic(15,"Codigo Postal"),o.Nb(),o.Ob(16,"th"),o.ic(17,"Permisos de Administrador"),o.Nb(),o.Nb(),o.Nb(),o.Ob(18,"tbody"),o.hc(19,F,16,8,"tr",3),o.Nb(),o.Nb(),o.Ob(20,"div",4),o.Ob(21,"div",5),o.Ob(22,"div",6),o.Ob(23,"div",7),o.Ob(24,"h5",8),o.ic(25),o.Nb(),o.Kb(26,"button",9),o.Nb(),o.Ob(27,"div",10),o.ic(28," \xbfAutorizas el cambio? "),o.Nb(),o.Ob(29,"div",11),o.Ob(30,"button",12),o.ic(31,"NO!"),o.Nb(),o.Ob(32,"button",13),o.Vb("click",function(){return t.toggleAdmin()}),o.ic(33," SI! "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(19),o.ac("ngForOf",t.users),o.yb(6),o.jc(t.query))},directives:[n.i],styles:[".wrapper[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.5)}"]}),e})();function j(e,t){if(1&e){const e=o.Pb();o.Ob(0,"tr"),o.Ob(1,"td"),o.ic(2),o.Nb(),o.Ob(3,"td"),o.ic(4),o.Nb(),o.Ob(5,"td"),o.Ob(6,"strong"),o.ic(7),o.Nb(),o.Nb(),o.Ob(8,"td"),o.Ob(9,"div",23),o.Ob(10,"i",24),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().setTag(i)}),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.kc("",e.id,"}"),o.yb(2),o.jc(e.name),o.yb(3),o.jc(e.type)}}let E=(()=>{class e{constructor(e,t,i){this.crud=e,this.alert=t,this.loader=i,this.crud.setEndpoint("tags"),this.tags=[],this.selectedTag={id:"",name:""},this.material=!1,this.line=!1,this.anime=!1,this.brand=!0}ngOnInit(){this.getTags()}getTags(){this.loader.beginLoad(),this.crud.setEndpoint("tags");const e=`?byAnime=${this.anime.toString()}\n                   &byMaterial=${this.material.toString()}\n                   &byLine=${this.line.toString()}\n                   &byBrand=${this.brand.toString()}`;this.crud.httpGet(e).toPromise().then(e=>this.tags=e.response).finally(()=>this.loader.endLoad())}setTag(e){this.selectedTag=e}delete(){var e;this.loader.beginLoad();const t=`tags/${null===(e=this.selectedTag.type)||void 0===e?void 0:e.toLowerCase()}`;this.crud.setEndpoint(t),this.crud.httpDelete(`?id=${this.selectedTag.id}`).toPromise().then(e=>{e.response&&(this.tags=this.tags.filter(e=>e.id!==this.selectedTag.id),this.alert.pushAlert({type:"success",message:"El tag se elimino con exito"}))}).finally(()=>this.loader.endLoad())}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(s.a),o.Jb(l.a),o.Jb(d.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-tags"]],decls:44,vars:7,consts:[[1,"wrapper"],[1,"header","d-flex","flex-wrap"],["type","checkbox","id","brand","name","brand","value","brand",3,"ngModel","change","ngModelChange"],["for","brand"],["type","checkbox","id","anime","name","anime","value","anime",3,"ngModel","change","ngModelChange"],["for","anime"],["type","checkbox","id","line","name","line","value","line",3,"ngModel","change","ngModelChange"],["for","line"],["type","checkbox","id","material","name","material","value","material",3,"ngModel","change","ngModelChange"],["for","material"],["id","articles",1,"table","table-striped"],[1,"bg-info"],[4,"ngFor","ngForOf"],["id","deleteConfirm","tabindex","-1","aria-labelledby","delete","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","delete",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"options"],["data-bs-toggle","modal","data-bs-target","#deleteConfirm",1,"fas","fa-trash",3,"click"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Ob(2,"input",2),o.Vb("change",function(){return t.getTags()})("ngModelChange",function(e){return t.brand=e}),o.Nb(),o.Ob(3,"label",3),o.ic(4,"Marca"),o.Nb(),o.Kb(5,"br"),o.Ob(6,"input",4),o.Vb("change",function(){return t.getTags()})("ngModelChange",function(e){return t.anime=e}),o.Nb(),o.Ob(7,"label",5),o.ic(8,"Anime"),o.Nb(),o.Kb(9,"br"),o.Ob(10,"input",6),o.Vb("change",function(){return t.getTags()})("ngModelChange",function(e){return t.line=e}),o.Nb(),o.Ob(11,"label",7),o.ic(12,"Linea"),o.Nb(),o.Kb(13,"br"),o.Ob(14,"input",8),o.Vb("change",function(){return t.getTags()})("ngModelChange",function(e){return t.material=e}),o.Nb(),o.Ob(15,"label",9),o.ic(16,"Material"),o.Nb(),o.Nb(),o.Ob(17,"table",10),o.Ob(18,"thead",11),o.Ob(19,"tr"),o.Ob(20,"th"),o.ic(21,"Id"),o.Nb(),o.Ob(22,"th"),o.ic(23,"Nombre"),o.Nb(),o.Ob(24,"th"),o.ic(25,"Tipo"),o.Nb(),o.Ob(26,"th"),o.ic(27,"Eliminar"),o.Nb(),o.Nb(),o.Nb(),o.Ob(28,"tbody"),o.hc(29,j,11,3,"tr",12),o.Nb(),o.Nb(),o.Ob(30,"div",13),o.Ob(31,"div",14),o.Ob(32,"div",15),o.Ob(33,"div",16),o.Ob(34,"h5",17),o.ic(35),o.Nb(),o.Kb(36,"button",18),o.Nb(),o.Ob(37,"div",19),o.ic(38," Esta acci\xf3n no se puede deshacer. "),o.Nb(),o.Ob(39,"div",20),o.Ob(40,"button",21),o.ic(41,"No, Quiero conservarlo"),o.Nb(),o.Ob(42,"button",22),o.Vb("click",function(){return t.delete()}),o.ic(43," Si, Eliminalo! "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(2),o.ac("ngModel",t.brand),o.yb(4),o.ac("ngModel",t.anime),o.yb(4),o.ac("ngModel",t.line),o.yb(4),o.ac("ngModel",t.material),o.yb(15),o.ac("ngForOf",t.tags),o.yb(6),o.lc("\xbfEstas apunto de eliminar el ",t.selectedTag.type," : ",t.selectedTag.name,"?"))},directives:[b.a,b.h,b.j,n.i],styles:[".wrapper[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.header[_ngcontent-%COMP%]{align-items:center;height:2rem}.header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 .5rem;transform:scale(1.5)}.header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:700;margin-right:1rem}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function I(e,t){if(1&e){const e=o.Pb();o.Ob(0,"tr"),o.Ob(1,"td"),o.ic(2),o.Nb(),o.Ob(3,"td"),o.Ob(4,"div",36),o.Kb(5,"img",37),o.Nb(),o.Nb(),o.Ob(6,"td"),o.Ob(7,"a",38),o.ic(8),o.Nb(),o.Nb(),o.Ob(9,"td"),o.ic(10),o.Nb(),o.Ob(11,"td"),o.Ob(12,"div",39),o.Ob(13,"i",40),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().update(i)}),o.Nb(),o.Ob(14,"i",41),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().setPromotion(i)}),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(e.id),o.yb(3),o.ac("src",e.imagePath,o.fc),o.yb(2),o.ac("href",e.redirectPath,o.fc),o.yb(1),o.kc(" ",e.redirectPath," "),o.yb(2),o.lc(" ",e.appearsOnLeft?"Lado izquierdo":""," ",e.appearsOnRight?"Lado derecho":""," ")}}function L(e,t){1&e&&o.Kb(0,"i",45)}function V(e,t){if(1&e){const e=o.Pb();o.Ob(0,"div",42),o.Vb("click",function(){return o.ec(e),o.Xb().removeImagePath()}),o.Kb(1,"img",43),o.hc(2,L,1,0,"i",44),o.Nb()}if(2&e){const e=o.Xb();o.yb(1),o.ac("src",e.imagePath.path,o.fc),o.yb(1),o.ac("ngIf",e.imagePath.path!==e.loadingGif)}}let $=(()=>{class e{constructor(e,t,i,n,a){this.formBuilder=e,this.loader=t,this.crud=i,this.blob=n,this.alert=a,this.promotions=[],this.selectedPromotion={},this.editFlag=!1,this.imagePath={},this.blockButton=!0,this.loadingGif="assets/loading.gif",this.form=this.formBuilder.group({id:[null],imagePath:[null],redirectPath:[null],side:[null,b.p.required],appearsOnRight:[!0],appearsOnLeft:[!1]})}ngOnInit(){this.getPromotions()}getPromotions(){this.crud.setEndpoint("promotions/read"),this.crud.httpGet().toPromise().then(e=>this.promotions=e.response)}setPromotion(e){this.selectedPromotion=e}removeImagePath(){this.imagePath!==this.loadingGif&&(this.blob.deletePromotionsImage(this.imagePath.path?this.imagePath.path:""),this.imagePath={},this.blockButton=!0)}loadImage(e){if(0===e.target.files.length)return;const t=e.target.files[0];this.imagePath={id:"gif",path:this.loadingGif};const i=this.blob.uploadFile(t).subscribe(e=>{if(e.type===h.c.UploadProgress){const t=Math.round(100*e.loaded/e.total);console.log("progress",t)}else e.type===h.c.Response&&(this.imagePath=e.body.response,this.blockButton=!1,i.unsubscribe())})}deleteImage(){this.editFlag||this.removeImagePath()}submit(){var e,t;if(0===Object.keys(this.imagePath).length)return;this.loader.beginLoad();const i=(null===(e=this.form.get("redirectPath"))||void 0===e?void 0:e.value)?null===(t=this.form.get("redirectPath"))||void 0===t?void 0:t.value:"";if(this.form.patchValue({imagePath:this.imagePath.path,redirectPath:i,appearsOnRight:"right"===this.form.value.side,appearsOnLeft:"left"===this.form.value.side}),this.editFlag)return this.crud.setEndpoint("promotions/update"),void this.crud.httpPut(this.form.value).toPromise().then(e=>{this.promotions=this.promotions.map(t=>t.id===e.response.id?e.response:t),this.alert.pushAlert({type:"success",message:"La promoci\xf3n se actualiz\xf3"}),this.form.reset(),this.imagePath={}}).finally(()=>this.loader.endLoad());this.crud.setEndpoint("promotions/create"),this.crud.httpPost(this.form.value).toPromise().then(e=>{e.response&&(this.promotions.unshift(e.response),this.alert.pushAlert({type:"success",message:"La promoci\xf3n se agrego con extio"}),this.form.reset(),this.imagePath={},this.blockButton=!0)}).finally(()=>this.loader.endLoad())}delete(){return Object(a.a)(this,void 0,void 0,function*(){this.selectedPromotion.id&&(this.loader.beginLoad(),this.crud.setEndpoint("promotions"),yield this.crud.httpDelete(`?id=${this.selectedPromotion.id}`).toPromise().then(e=>{e.response&&(this.blob.deletePromotionsImage(this.selectedPromotion.imagePath?this.selectedPromotion.imagePath:""),this.alert.pushAlert({type:"success",message:"Promoci\xf3n eliminada con exito"}),this.promotions=this.promotions.filter(e=>e.id!==this.selectedPromotion.id))}).finally(()=>this.loader.endLoad()))})}update(e){this.editFlag=!0,this.blockButton=!1,this.form.patchValue({id:e.id,redirectPath:e.redirectPath}),this.imagePath={path:e.imagePath}}cleanForms(){this.form.reset(),this.imagePath={},this.blockButton=!1,this.editFlag=!1}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(b.c),o.Jb(d.a),o.Jb(s.a),o.Jb(u),o.Jb(l.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-promotions"]],decls:68,vars:8,consts:[[1,"wrapper"],[1,"header"],["data-bs-toggle","modal","data-bs-target","#createModal",1,"btn","btn-success","add",3,"click"],["id","articles",1,"table","table-striped"],[1,"bg-info"],[4,"ngFor","ngForOf"],["id","deleteConfirm","tabindex","-1","aria-labelledby","delete","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","delete",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","createModal","tabindex","-1","aria-labelledby","create","aria-hidden","true",1,"modal","fade"],["id","create",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup"],[1,"form-group"],["for","redirectPath"],["formControlName","redirectPath","type","text","id","redirectPath","placeholder","https://shinsekai/articulos?id=123-123-123",1,"form-control"],[1,"text-primary"],[1,"form-check"],["formControlName","side","type","radio","name","side","id","rightSide","value","right",1,"form-check-input"],["for","rightSide",1,"form-check-label"],["formControlName","side","type","radio","name","side","id","leftSide","value","left",1,"form-check-input"],["for","leftSide",1,"form-check-label"],[1,"pt-3","pb-3","form-group"],["for","images"],["id","images","type","file","name","myImage","accept","image/*",3,"disabled","change"],[1,"d-flex"],["class","images",3,"click",4,"ngIf"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],[1,"img-container"],["alt","promotion",3,"src"],[3,"href"],[1,"options"],["data-bs-toggle","modal","data-bs-target","#createModal",1,"fas","fa-pen",3,"click"],["data-bs-toggle","modal","data-bs-target","#deleteConfirm",1,"fas","fa-trash",3,"click"],[1,"images",3,"click"],["alt","loading",3,"src"],["class","fas fa-trash",4,"ngIf"],[1,"fas","fa-trash"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Ob(2,"button",2),o.Vb("click",function(){return t.cleanForms()}),o.ic(3," + Agregar Nueva Promoci\xf3n "),o.Nb(),o.Nb(),o.Ob(4,"table",3),o.Ob(5,"thead",4),o.Ob(6,"tr"),o.Ob(7,"th"),o.ic(8,"Id"),o.Nb(),o.Ob(9,"th"),o.ic(10,"Foto"),o.Nb(),o.Ob(11,"th"),o.ic(12,"Ruta a la cual ir al hacer click"),o.Nb(),o.Ob(13,"th"),o.ic(14,"Lugar en el que se muestra en pagina principal"),o.Nb(),o.Ob(15,"th"),o.ic(16,"Opciones"),o.Nb(),o.Nb(),o.Nb(),o.Ob(17,"tbody"),o.hc(18,I,15,6,"tr",5),o.Nb(),o.Nb(),o.Nb(),o.Ob(19,"div",6),o.Ob(20,"div",7),o.Ob(21,"div",8),o.Ob(22,"div",9),o.Ob(23,"h5",10),o.ic(24),o.Nb(),o.Kb(25,"button",11),o.Nb(),o.Ob(26,"div",12),o.ic(27," Esta acci\xf3n no se puede deshacer. "),o.Nb(),o.Ob(28,"div",13),o.Ob(29,"button",14),o.ic(30,"No, Quiero conservarlo"),o.Nb(),o.Ob(31,"button",15),o.Vb("click",function(){return t.delete()}),o.ic(32," Si, Eliminalo! "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Ob(33,"div",16),o.Ob(34,"div",7),o.Ob(35,"div",8),o.Ob(36,"div",9),o.Ob(37,"h5",17),o.ic(38),o.Nb(),o.Ob(39,"button",18),o.Vb("click",function(){return t.deleteImage()}),o.Nb(),o.Nb(),o.Ob(40,"div",12),o.Ob(41,"form",19),o.Ob(42,"div",20),o.Ob(43,"label",21),o.ic(44,"Ruta a la cual redirigir al hacer click:"),o.Nb(),o.Kb(45,"input",22),o.Ob(46,"small",23),o.ic(47,"Si la promocion no redirige a ninguna ruta dejar vacio"),o.Nb(),o.Nb(),o.Ob(48,"div",20),o.Ob(49,"div",24),o.Kb(50,"input",25),o.Ob(51,"label",26),o.ic(52," La promoci\xf3n aparecera del lado derecho en la pagina inicial. "),o.Nb(),o.Nb(),o.Ob(53,"div",24),o.Kb(54,"input",27),o.Ob(55,"label",28),o.ic(56," La promoci\xf3n aparecera del lado izquierdo en la pagina inicial. "),o.Nb(),o.Nb(),o.Nb(),o.Ob(57,"div",29),o.Ob(58,"label",30),o.ic(59,"Imagen:"),o.Nb(),o.Ob(60,"input",31),o.Vb("change",function(e){return t.loadImage(e)}),o.Nb(),o.Nb(),o.Ob(61,"div",32),o.hc(62,V,3,2,"div",33),o.Nb(),o.Nb(),o.Ob(63,"div",13),o.Ob(64,"button",34),o.Vb("click",function(){return t.submit()}),o.ic(65),o.Nb(),o.Ob(66,"button",35),o.Vb("click",function(){return t.deleteImage()}),o.ic(67," Cerrar "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(18),o.ac("ngForOf",t.promotions),o.yb(6),o.kc("\xbfEstas apunto de eliminar la promocion con id: ",t.selectedPromotion.id,"?"),o.yb(14),o.jc(t.editFlag?"Editando Promoci\xf3n":"Nueva Promoci\xf3n"),o.yb(3),o.ac("formGroup",t.form),o.yb(19),o.ac("disabled",t.imagePath.path),o.yb(2),o.ac("ngIf",t.imagePath.path),o.yb(2),o.ac("disabled",t.blockButton||t.form.invalid||!t.imagePath),o.yb(1),o.kc(" ",t.editFlag?"Actualizar":"Guardar"," "))},directives:[n.i,b.q,b.i,b.e,b.b,b.h,b.d,b.m,n.j],styles:[".wrapper[_ngcontent-%COMP%]{overflow-x:auto}.img-container[_ngcontent-%COMP%]{height:7rem}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:contain;width:100%}select[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{margin-right:1rem}small[_ngcontent-%COMP%]{color:#e62121}span[_ngcontent-%COMP%]{background:grey;font-size:.875rem;margin:.125rem}.options[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.25rem;margin:0 .5rem}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}.images[_ngcontent-%COMP%]{cursor:pointer;display:flex;height:12rem;justify-content:center;margin:.5rem;position:relative;width:100%}.images[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{color:#e62121}.images[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;left:0;margin:15% auto;position:absolute;right:0;text-align:center}.images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:contain;width:100%}.pagination[_ngcontent-%COMP%]{align-items:center;display:flex;margin:1rem 0;-webkit-user-select:none;user-select:none}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 .5rem;width:3rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.5rem;margin-left:.5rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}.header[_ngcontent-%COMP%]{display:flex;padding:1rem}.header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 2rem}.header[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{margin-left:auto}"]}),e})();function S(e,t){if(1&e){const e=o.Pb();o.Ob(0,"tr"),o.Ob(1,"td"),o.ic(2),o.Nb(),o.Ob(3,"td"),o.Ob(4,"div",31),o.Kb(5,"img",32),o.Nb(),o.Nb(),o.Ob(6,"td"),o.Ob(7,"a",33),o.ic(8),o.Nb(),o.Nb(),o.Ob(9,"td"),o.Ob(10,"div",34),o.Ob(11,"i",35),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().update(i)}),o.Nb(),o.Ob(12,"i",36),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().setCarousel(i)}),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(e.id),o.yb(3),o.ac("src",e.imagePath,o.fc),o.yb(2),o.ac("href",e.redirectPath,o.fc),o.yb(1),o.kc(" ",e.redirectPath," ")}}function D(e,t){1&e&&o.Kb(0,"i",40)}function T(e,t){if(1&e){const e=o.Pb();o.Ob(0,"div",37),o.Vb("click",function(){return o.ec(e),o.Xb().removeImagePath()}),o.Kb(1,"img",38),o.hc(2,D,1,0,"i",39),o.Nb()}if(2&e){const e=o.Xb();o.yb(1),o.ac("src",e.imagePath.path,o.fc),o.yb(1),o.ac("ngIf",e.imagePath.path!==e.loadingGif)}}let q=(()=>{class e{constructor(e,t,i,n,a){this.formBuilder=e,this.loader=t,this.crud=i,this.blob=n,this.alert=a,this.carousels=[],this.selectedCarousel={},this.editFlag=!1,this.imagePath={},this.blockButton=!0,this.loadingGif="assets/loading.gif",this.form=this.formBuilder.group({id:[null],imagePath:[null],redirectPath:[null]})}ngOnInit(){this.getCarousels()}getCarousels(){this.crud.setEndpoint("carousels/read"),this.crud.httpGet().toPromise().then(e=>this.carousels=e.response)}setCarousel(e){this.selectedCarousel=e}removeImagePath(){this.imagePath!==this.loadingGif&&(this.blob.deletePromotionsImage(this.imagePath.path?this.imagePath.path:""),this.imagePath={},this.blockButton=!0)}loadImage(e){if(0===e.target.files.length)return;const t=e.target.files[0];this.imagePath={id:"gif",path:this.loadingGif};const i=this.blob.uploadFile(t).subscribe(e=>{if(e.type===h.c.UploadProgress){const t=Math.round(100*e.loaded/e.total);console.log("progress",t)}else e.type===h.c.Response&&(this.imagePath=e.body.response,this.blockButton=!1,i.unsubscribe())})}deleteImage(){this.editFlag||this.removeImagePath()}submit(){var e,t;if(0===Object.keys(this.imagePath).length)return;this.loader.beginLoad();const i=(null===(e=this.form.get("redirectPath"))||void 0===e?void 0:e.value)?null===(t=this.form.get("redirectPath"))||void 0===t?void 0:t.value:"";if(this.form.patchValue({imagePath:this.imagePath.path,redirectPath:i}),this.editFlag)return this.crud.setEndpoint("carousels/update"),void this.crud.httpPut(this.form.value).toPromise().then(e=>{this.carousels=this.carousels.map(t=>t.id===e.response.id?e.response:t),this.alert.pushAlert({type:"success",message:"el carrusel se actualiz\xf3"}),this.form.reset(),this.imagePath={}}).finally(()=>this.loader.endLoad());this.crud.setEndpoint("carousels/create"),this.crud.httpPost(this.form.value).toPromise().then(e=>{e.response&&(this.carousels.unshift(e.response),this.alert.pushAlert({type:"success",message:"el carrusel se agrego con extio"}),this.form.reset(),this.imagePath={},this.blockButton=!0)}).finally(()=>this.loader.endLoad())}delete(){return Object(a.a)(this,void 0,void 0,function*(){this.selectedCarousel.id&&(this.loader.beginLoad(),this.crud.setEndpoint("carousels"),yield this.crud.httpDelete(`?id=${this.selectedCarousel.id}`).toPromise().then(e=>{e.response&&(this.blob.deletePromotionsImage(this.selectedCarousel.imagePath?this.selectedCarousel.imagePath:""),this.alert.pushAlert({type:"success",message:"Carrusel eliminada con exito"}),this.carousels=this.carousels.filter(e=>e.id!==this.selectedCarousel.id))}).finally(()=>this.loader.endLoad()))})}update(e){this.editFlag=!0,this.blockButton=!1,this.form.patchValue({id:e.id,redirectPath:e.redirectPath}),this.imagePath={path:e.imagePath}}cleanForms(){this.form.reset(),this.imagePath={},this.blockButton=!1,this.editFlag=!1}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(b.c),o.Jb(d.a),o.Jb(s.a),o.Jb(u),o.Jb(l.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-carousels"]],decls:57,vars:8,consts:[[1,"wrapper"],[1,"header"],["data-bs-toggle","modal","data-bs-target","#createModal",1,"btn","btn-success","add",3,"click"],["id","articles",1,"table","table-striped"],[1,"bg-info"],[4,"ngFor","ngForOf"],["id","deleteConfirm","tabindex","-1","aria-labelledby","delete","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","delete",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","createModal","tabindex","-1","aria-labelledby","create","aria-hidden","true",1,"modal","fade"],["id","create",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup"],[1,"form-group"],["for","redirectPath"],["formControlName","redirectPath","type","text","id","redirectPath","placeholder","https://shinsekai/articulos?id=123-123-123",1,"form-control"],[1,"text-primary"],[1,"pt-3","pb-3","form-group"],["for","images"],["id","images","type","file","name","myImage","accept","image/*",3,"disabled","change"],[1,"d-flex"],["class","images",3,"click",4,"ngIf"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],[1,"img-container"],["alt","carousel",3,"src"],[3,"href"],[1,"options"],["data-bs-toggle","modal","data-bs-target","#createModal",1,"fas","fa-pen",3,"click"],["data-bs-toggle","modal","data-bs-target","#deleteConfirm",1,"fas","fa-trash",3,"click"],[1,"images",3,"click"],["alt","loading",3,"src"],["class","fas fa-trash",4,"ngIf"],[1,"fas","fa-trash"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Ob(2,"button",2),o.Vb("click",function(){return t.cleanForms()}),o.ic(3," + Agregar Nuevo Carrusel "),o.Nb(),o.Nb(),o.Ob(4,"table",3),o.Ob(5,"thead",4),o.Ob(6,"tr"),o.Ob(7,"th"),o.ic(8,"Id"),o.Nb(),o.Ob(9,"th"),o.ic(10,"Foto"),o.Nb(),o.Ob(11,"th"),o.ic(12,"Ruta a la cual ir al hacer click"),o.Nb(),o.Ob(13,"th"),o.ic(14,"Opciones"),o.Nb(),o.Nb(),o.Nb(),o.Ob(15,"tbody"),o.hc(16,S,13,4,"tr",5),o.Nb(),o.Nb(),o.Nb(),o.Ob(17,"div",6),o.Ob(18,"div",7),o.Ob(19,"div",8),o.Ob(20,"div",9),o.Ob(21,"h5",10),o.ic(22),o.Nb(),o.Kb(23,"button",11),o.Nb(),o.Ob(24,"div",12),o.ic(25," Esta acci\xf3n no se puede deshacer. "),o.Nb(),o.Ob(26,"div",13),o.Ob(27,"button",14),o.ic(28,"No, Quiero conservarlo"),o.Nb(),o.Ob(29,"button",15),o.Vb("click",function(){return t.delete()}),o.ic(30," Si, Eliminalo! "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Ob(31,"div",16),o.Ob(32,"div",7),o.Ob(33,"div",8),o.Ob(34,"div",9),o.Ob(35,"h5",17),o.ic(36),o.Nb(),o.Ob(37,"button",18),o.Vb("click",function(){return t.deleteImage()}),o.Nb(),o.Nb(),o.Ob(38,"div",12),o.Ob(39,"form",19),o.Ob(40,"div",20),o.Ob(41,"label",21),o.ic(42,"Ruta a la cual redirigir al hacer click:"),o.Nb(),o.Kb(43,"input",22),o.Ob(44,"small",23),o.ic(45,"Si el carrusel no redirige a ninguna ruta dejar vacio"),o.Nb(),o.Nb(),o.Ob(46,"div",24),o.Ob(47,"label",25),o.ic(48,"Imagen:"),o.Nb(),o.Ob(49,"input",26),o.Vb("change",function(e){return t.loadImage(e)}),o.Nb(),o.Nb(),o.Ob(50,"div",27),o.hc(51,T,3,2,"div",28),o.Nb(),o.Nb(),o.Ob(52,"div",13),o.Ob(53,"button",29),o.Vb("click",function(){return t.submit()}),o.ic(54),o.Nb(),o.Ob(55,"button",30),o.Vb("click",function(){return t.deleteImage()}),o.ic(56," Cerrar "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(16),o.ac("ngForOf",t.carousels),o.yb(6),o.kc("\xbfEstas apunto de eliminar el carrusel con id: ",t.selectedCarousel.id,"?"),o.yb(14),o.jc(t.editFlag?"Editando Carrusel":"Nuevo Carrusel"),o.yb(3),o.ac("formGroup",t.form),o.yb(10),o.ac("disabled",t.imagePath.path),o.yb(2),o.ac("ngIf",t.imagePath.path),o.yb(2),o.ac("disabled",t.blockButton),o.yb(1),o.kc(" ",t.editFlag?"Actualizar":"Guardar"," "))},directives:[n.i,b.q,b.i,b.e,b.b,b.h,b.d,n.j],styles:[".wrapper[_ngcontent-%COMP%]{overflow-x:auto}.img-container[_ngcontent-%COMP%]{height:7rem}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:contain;width:100%}select[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{margin-right:1rem}small[_ngcontent-%COMP%]{color:#e62121}span[_ngcontent-%COMP%]{background:grey;font-size:.875rem;margin:.125rem}.options[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.25rem;margin:0 .5rem}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}.images[_ngcontent-%COMP%]{cursor:pointer;display:flex;height:12rem;justify-content:center;margin:.5rem;position:relative;width:100%}.images[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{color:#e62121}.images[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;left:0;margin:15% auto;position:absolute;right:0;text-align:center}.images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:contain;width:100%}.pagination[_ngcontent-%COMP%]{align-items:center;display:flex;margin:1rem 0;-webkit-user-select:none;user-select:none}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 .5rem;width:3rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.5rem;margin-left:.5rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}.header[_ngcontent-%COMP%]{display:flex;padding:1rem}.header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 2rem}.header[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{margin-left:auto}"]}),e})();function K(e,t){if(1&e){const e=o.Pb();o.Ob(0,"tr"),o.Ob(1,"td"),o.ic(2),o.Nb(),o.Ob(3,"td"),o.ic(4),o.Nb(),o.Ob(5,"td"),o.ic(6),o.Nb(),o.Ob(7,"td"),o.ic(8),o.Nb(),o.Ob(9,"td"),o.ic(10),o.Nb(),o.Ob(11,"td"),o.Ob(12,"div",16),o.Ob(13,"i",17),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().setPurchase(i)}),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(null==e?null:e.id),o.yb(2),o.jc(null==e?null:e.purchaseDate),o.yb(2),o.jc(null==e||null==e.buyer?null:e.buyer.name),o.yb(2),o.jc(null==e||null==e.buyer?null:e.buyer.email),o.yb(2),o.kc("$",null==e?null:e.total," MXN")}}function B(e,t){if(1&e&&(o.Ob(0,"li"),o.ic(1),o.Ob(2,"span"),o.ic(3),o.Nb(),o.Nb()),2&e){const e=t.$implicit;o.yb(1),o.kc(" ",null==e?null:e.name," -- "),o.yb(2),o.lc("",null==e?null:e.quantity," unidad",void 0!==e.quantity&&e.quantity>1?"es":"",".")}}let G=(()=>{class e{constructor(e,t,i){this.crud=e,this.loader=t,this.alert=i,this.purchases=[],this.selectedPurchase={},this.searchPurchase=""}ngOnInit(){this.loader.beginLoad(),this.crud.setEndpoint("purchases/read"),this.crud.httpGet().toPromise().then(e=>{this.purchases=e.response,this.purchases.forEach(e=>{e.purchaseDate=void 0!==e.purchaseDate?new Date(e.purchaseDate.toLocaleString()).toString():"10-09-1992"})}).finally(()=>this.loader.endLoad())}setPurchase(e){this.selectedPurchase=e}searchPurchases(e=null){e&&13!==e.keyCode||(36!==this.searchPurchase.length&&this.alert.pushAlert({type:"danger",message:"El id que ingresaste no es valido"}),this.loader.beginLoad(),this.crud.setEndpoint("purchases/read?id="+this.searchPurchase),this.crud.httpGet().toPromise().then(e=>{e.response&&(this.purchases=[],this.purchases.push(e.response),console.log(e.response))}).finally(()=>this.loader.endLoad()))}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(s.a),o.Jb(d.a),o.Jb(l.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-purchases"]],decls:51,vars:7,consts:[[1,"wrapper"],[1,"header"],["placeholder","Buscar por id",3,"ngModel","keyup","ngModelChange"],[1,"btn","btn-outline-success",3,"click"],["id","articles",1,"table","table-striped"],[1,"bg-info"],[4,"ngFor","ngForOf"],["id","readModal","tabindex","-1","aria-labelledby","read","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","read",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"options"],["data-bs-toggle","modal","data-bs-target","#readModal",1,"far","fa-eye",3,"click"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Ob(2,"input",2),o.Vb("keyup",function(e){return t.searchPurchases(e)})("ngModelChange",function(e){return t.searchPurchase=e}),o.Nb(),o.Ob(3,"button",3),o.Vb("click",function(){return t.searchPurchases()}),o.ic(4,"Buscar"),o.Nb(),o.Nb(),o.Ob(5,"table",4),o.Ob(6,"thead",5),o.Ob(7,"tr"),o.Ob(8,"th"),o.ic(9,"Id"),o.Nb(),o.Ob(10,"th"),o.ic(11,"Fecha de Compra"),o.Nb(),o.Ob(12,"th"),o.ic(13,"Nombre Comprador"),o.Nb(),o.Ob(14,"th"),o.ic(15,"Email Comprador"),o.Nb(),o.Ob(16,"th"),o.ic(17,"Total de Compra"),o.Nb(),o.Ob(18,"th"),o.ic(19,"Ver Detalles"),o.Nb(),o.Nb(),o.Nb(),o.Ob(20,"tbody"),o.hc(21,K,14,5,"tr",6),o.Nb(),o.Nb(),o.Nb(),o.Ob(22,"div",7),o.Ob(23,"div",8),o.Ob(24,"div",9),o.Ob(25,"div",10),o.Ob(26,"h5",11),o.ic(27),o.Nb(),o.Kb(28,"button",12),o.Nb(),o.Ob(29,"div",13),o.Ob(30,"dl"),o.Ob(31,"dt"),o.ic(32,"ID"),o.Nb(),o.Ob(33,"dd"),o.ic(34),o.Nb(),o.Ob(35,"dt"),o.ic(36,"Persona que recibe"),o.Nb(),o.Ob(37,"dd"),o.ic(38),o.Nb(),o.Ob(39,"dt"),o.ic(40,"Datos de Envio"),o.Nb(),o.Ob(41,"dd"),o.ic(42),o.Nb(),o.Ob(43,"dt"),o.ic(44,"Articulos a Enviar"),o.Nb(),o.Ob(45,"dd"),o.Ob(46,"ul"),o.hc(47,B,4,3,"li",6),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Ob(48,"div",14),o.Ob(49,"button",15),o.ic(50,"Cerrar"),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(2),o.ac("ngModel",t.searchPurchase),o.yb(19),o.ac("ngForOf",t.purchases),o.yb(6),o.kc("Compra con id #",null==t.selectedPurchase?null:t.selectedPurchase.id,""),o.yb(7),o.jc(null==t.selectedPurchase?null:t.selectedPurchase.id),o.yb(4),o.jc(null==t.selectedPurchase||null==t.selectedPurchase.buyer?null:t.selectedPurchase.buyer.name),o.yb(4),o.jc((null==t.selectedPurchase||null==t.selectedPurchase.buyer?null:t.selectedPurchase.buyer.address)+", "+(null==t.selectedPurchase||null==t.selectedPurchase.buyer?null:t.selectedPurchase.buyer.city)+", "+(null==t.selectedPurchase||null==t.selectedPurchase.buyer?null:t.selectedPurchase.buyer.postalCode)),o.yb(5),o.ac("ngForOf",null==t.selectedPurchase?null:t.selectedPurchase.articles))},directives:[b.b,b.h,b.j,n.i],styles:[".wrapper[_ngcontent-%COMP%]{overflow-x:auto}select[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{margin-right:1rem}small[_ngcontent-%COMP%]{color:#e62121}span[_ngcontent-%COMP%]{background:grey;font-size:.875rem;margin:.125rem}.combo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.combo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:red}.images[_ngcontent-%COMP%]{cursor:pointer;height:8rem;margin:.5rem;position:relative;width:6rem}.images[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{color:#e62121}.images[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;left:0;margin:50% auto;position:absolute;right:0;text-align:center}.images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:contain;width:100%}.pagination[_ngcontent-%COMP%]{align-items:center;display:flex;margin:1rem 0;-webkit-user-select:none;user-select:none}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 .5rem;width:3rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.5rem;margin-left:.5rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}.header[_ngcontent-%COMP%]{display:flex;padding:1rem}.header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 2rem}.header[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{margin-left:auto}.options[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.25rem;margin:0 .5rem}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}ul[_ngcontent-%COMP%]{list-style:square}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:none;color:#1976d2;font-size:inherit}"]}),e})();function z(e,t){if(1&e){const e=o.Pb();o.Ob(0,"tr"),o.Ob(1,"td"),o.ic(2),o.Nb(),o.Ob(3,"td"),o.ic(4),o.Nb(),o.Ob(5,"td"),o.ic(6),o.Nb(),o.Ob(7,"td"),o.Ob(8,"div",28),o.Ob(9,"i",29),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().update(i)}),o.Nb(),o.Ob(10,"i",30),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().setShipping(i)}),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(e.parcel),o.yb(2),o.jc(e.location),o.yb(2),o.jc(e.estimatedDays)}}let J=(()=>{class e{constructor(e,t,i,n){this.crud=e,this.formBuilder=t,this.loader=i,this.alert=n,this.deliveries=[],this.editFlag=!1,this.selectedDelivery={},this.form=this.formBuilder.group({id:[null],parcel:[null,b.p.required],estimatedDays:[10,b.p.required],location:[null,b.p.required]})}ngOnInit(){this.loader.beginLoad(),this.crud.setEndpoint("delivery/read"),this.getShipping()}getShipping(){this.crud.httpGet().toPromise().then(e=>this.deliveries=e.response).finally(()=>this.loader.endLoad())}cleanForms(){this.form.reset(),this.editFlag=!1}update(e){this.editFlag=!0,this.form.patchValue({id:null==e?void 0:e.id,parcel:null==e?void 0:e.parcel,estimatedDays:null==e?void 0:e.estimatedDays,location:null==e?void 0:e.location})}setShipping(e){this.selectedDelivery=e}delete(){this.loader.beginLoad(),this.crud.setEndpoint("delivery"),this.crud.httpDelete(`?id=${this.selectedDelivery.id}`).toPromise().then(e=>{e.response&&(this.deliveries=this.deliveries.filter(e=>e.id!==this.selectedDelivery.id),this.alert.pushAlert({type:"success",message:"El tiempo de entrega se elimino con exito"}))}).finally(()=>this.loader.endLoad())}submit(){if(!this.form.invalid){if(this.loader.beginLoad(),this.editFlag)return this.crud.setEndpoint("delivery/update"),void this.crud.httpPut(this.form.value).toPromise().then(e=>{e.response&&(this.deliveries=this.deliveries.map(t=>t.id===e.response.id?e.response:t),this.alert.pushAlert({type:"success",message:"La fecha de entrega se actualizo con exito"}),this.cleanForms())}).finally(()=>this.loader.endLoad());this.crud.setEndpoint("delivery/create"),this.crud.httpPost(this.form.value).toPromise().then(e=>{e.response&&(this.deliveries.unshift(e.response),this.alert.pushAlert({type:"success",message:"La fecha de entrega se creo con exito"}),this.cleanForms())}).finally(()=>this.loader.endLoad())}}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(s.a),o.Jb(b.c),o.Jb(d.a),o.Jb(l.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-shipping"]],decls:59,vars:6,consts:[[1,"wrapper"],[1,"header"],["data-bs-toggle","modal","data-bs-target","#createModal",1,"btn","btn-success","add",3,"click"],["id","articles",1,"table","table-striped"],[1,"bg-info"],[4,"ngFor","ngForOf"],["id","deleteConfirm","tabindex","-1","aria-labelledby","delete","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","delete",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","createModal","tabindex","-1","aria-labelledby","create","aria-hidden","true",1,"modal","fade"],["id","create",1,"modal-title"],[3,"formGroup"],[1,"form-group"],["for","parcel"],["formControlName","parcel","type","text","id","parcel","placeholder","Fedex",1,"form-control"],["for","location"],["formControlName","location","type","text","id","location","placeholder","Quer\xe9taro",1,"form-control"],[1,"text-primary"],["for","estimatedDays"],["formControlName","estimatedDays","type","number","id","estimatedDays",1,"form-control"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],[1,"options"],["data-bs-toggle","modal","data-bs-target","#createModal",1,"fas","fa-pen",3,"click"],["data-bs-toggle","modal","data-bs-target","#deleteConfirm",1,"fas","fa-trash",3,"click"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Ob(2,"button",2),o.Vb("click",function(){return t.cleanForms()}),o.ic(3," + Agregar Nueva Fecha de Entrega "),o.Nb(),o.Nb(),o.Ob(4,"table",3),o.Ob(5,"thead",4),o.Ob(6,"tr"),o.Ob(7,"th"),o.ic(8,"Paqueteria"),o.Nb(),o.Ob(9,"th"),o.ic(10,"Locaci\xf3n"),o.Nb(),o.Ob(11,"th"),o.ic(12,"Dias estimados de entrega"),o.Nb(),o.Ob(13,"th"),o.ic(14,"Opciones"),o.Nb(),o.Nb(),o.Nb(),o.Ob(15,"tbody"),o.hc(16,z,11,3,"tr",5),o.Nb(),o.Nb(),o.Nb(),o.Ob(17,"div",6),o.Ob(18,"div",7),o.Ob(19,"div",8),o.Ob(20,"div",9),o.Ob(21,"h5",10),o.ic(22),o.Nb(),o.Kb(23,"button",11),o.Nb(),o.Ob(24,"div",12),o.ic(25," Esta acci\xf3n no se puede deshacer. "),o.Nb(),o.Ob(26,"div",13),o.Ob(27,"button",14),o.ic(28,"No, Quiero conservarla"),o.Nb(),o.Ob(29,"button",15),o.Vb("click",function(){return t.delete()}),o.ic(30," Si, Eliminala! "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Ob(31,"div",16),o.Ob(32,"div",7),o.Ob(33,"div",8),o.Ob(34,"div",9),o.Ob(35,"h5",17),o.ic(36),o.Nb(),o.Kb(37,"button",11),o.Nb(),o.Ob(38,"div",12),o.Ob(39,"form",18),o.Ob(40,"div",19),o.Ob(41,"label",20),o.ic(42,"Paqueteria:"),o.Nb(),o.Kb(43,"input",21),o.Nb(),o.Ob(44,"div",19),o.Ob(45,"label",22),o.ic(46,"Locaci\xf3n"),o.Nb(),o.Kb(47,"input",23),o.Ob(48,"small",24),o.ic(49,"La locaci\xf3n se refiere a la ciudad o al lugar"),o.Nb(),o.Nb(),o.Ob(50,"div",19),o.Ob(51,"label",25),o.ic(52,"Dias estimados de entrega:"),o.Nb(),o.Kb(53,"input",26),o.Nb(),o.Nb(),o.Ob(54,"div",13),o.Ob(55,"button",27),o.Vb("click",function(){return t.submit()}),o.ic(56),o.Nb(),o.Ob(57,"button",14),o.ic(58," Cerrar "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(16),o.ac("ngForOf",t.deliveries),o.yb(6),o.kc("\xbfEstas apunto de eliminar la fecha de entrega a la locaci\xf3n: ",t.selectedDelivery.location,"?"),o.yb(14),o.jc(t.editFlag?"Editando Promoci\xf3n":"Nueva Promoci\xf3n"),o.yb(3),o.ac("formGroup",t.form),o.yb(16),o.ac("disabled",t.form.invalid),o.yb(1),o.kc(" ",t.editFlag?"Actualizar":"Guardar"," "))},directives:[n.i,b.q,b.i,b.e,b.b,b.h,b.d,b.l],styles:[".wrapper[_ngcontent-%COMP%]{overflow-x:auto}.img-container[_ngcontent-%COMP%]{height:7rem}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:contain;width:100%}select[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{margin-right:1rem}small[_ngcontent-%COMP%]{color:#e62121}span[_ngcontent-%COMP%]{background:grey;font-size:.875rem;margin:.125rem}.options[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.25rem;margin:0 .5rem}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}.images[_ngcontent-%COMP%]{cursor:pointer;display:flex;height:12rem;justify-content:center;margin:.5rem;position:relative;width:100%}.images[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{color:#e62121}.images[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;left:0;margin:15% auto;position:absolute;right:0;text-align:center}.images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:contain;width:100%}.pagination[_ngcontent-%COMP%]{align-items:center;display:flex;margin:1rem 0;-webkit-user-select:none;user-select:none}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 .5rem;width:3rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.5rem;margin-left:.5rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}.header[_ngcontent-%COMP%]{display:flex;padding:1rem}.header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 2rem}.header[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{margin-left:auto}"]}),e})();function X(e,t){if(1&e){const e=o.Pb();o.Ob(0,"tr"),o.Ob(1,"td"),o.ic(2),o.Nb(),o.Ob(3,"td"),o.ic(4),o.Nb(),o.Ob(5,"td"),o.ic(6),o.Nb(),o.Ob(7,"td"),o.Ob(8,"div",26),o.Ob(9,"i",27),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().update(i)}),o.Nb(),o.Ob(10,"i",28),o.Vb("click",function(){o.ec(e);const i=t.$implicit;return o.Xb().setQuestion(i)}),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit;o.yb(2),o.jc(null==e?null:e.id),o.yb(2),o.jc(null==e?null:e.question),o.yb(2),o.jc(null==e?null:e.answer)}}let R=(()=>{class e{constructor(e,t,i,n){this.crud=e,this.formBuilder=t,this.loader=i,this.alert=n,this.questions=[],this.selectedQuestion={},this.editFlag=!1,this.form=this.formBuilder.group({id:[null],question:[null,b.p.required],answer:[null,b.p.required]})}ngOnInit(){this.loader.beginLoad(),this.crud.setEndpoint("admin/questions/read"),this.getQuestions()}getQuestions(){this.crud.httpGet().toPromise().then(e=>this.questions=e.response).finally(()=>this.loader.endLoad())}cleanForms(){this.form.reset(),this.editFlag=!1}update(e){this.editFlag=!0,this.form.patchValue({id:null==e?void 0:e.id,question:null==e?void 0:e.question,answer:null==e?void 0:e.answer})}setQuestion(e){this.selectedQuestion=e}delete(){this.loader.beginLoad(),this.crud.setEndpoint("admin/questions"),this.crud.httpDelete(`?id=${this.selectedQuestion.id}`).toPromise().then(e=>{e.response&&(this.questions=this.questions.filter(e=>e.id!==this.selectedQuestion.id),this.alert.pushAlert({type:"success",message:"La pregunta se elimino con exito"}))}).finally(()=>this.loader.endLoad())}submit(){if(!this.form.invalid){if(this.loader.beginLoad(),this.editFlag)return this.crud.setEndpoint("admin/questions/update"),void this.crud.httpPut(this.form.value).toPromise().then(e=>{e.response&&(this.questions=this.questions.map(t=>t.id===e.response.id?e.response:t),this.alert.pushAlert({type:"success",message:"La pregunta se actualizo con exito"}),this.cleanForms())}).finally(()=>this.loader.endLoad());this.crud.setEndpoint("admin/questions/create"),this.crud.httpPost(this.form.value).toPromise().then(e=>{e.response&&(this.questions.unshift(e.response),this.alert.pushAlert({type:"success",message:"La pregunta se creo con exito"}),this.cleanForms())}).finally(()=>this.loader.endLoad())}}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(s.a),o.Jb(b.c),o.Jb(d.a),o.Jb(l.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-questions"]],decls:53,vars:6,consts:[[1,"wrapper"],[1,"header"],["data-bs-toggle","modal","data-bs-target","#createModal",1,"btn","btn-success","add",3,"click"],["id","articles",1,"table","table-striped"],[1,"bg-info"],[4,"ngFor","ngForOf"],["id","deleteConfirm","tabindex","-1","aria-labelledby","delete","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","delete",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","createModal","tabindex","-1","aria-labelledby","create","aria-hidden","true",1,"modal","fade"],["id","create",1,"modal-title"],[3,"formGroup"],[1,"form-group"],["for","question"],["formControlName","question","type","text","id","question","placeholder","\xbfEn Cuanto tiempo recibire mi producto?",1,"form-control"],[1,"pt-3","pb-3","form-group"],["for","answer"],["formControlName","answer","type","text","id","answer","rows","8",1,"form-control"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],[1,"options"],["data-bs-toggle","modal","data-bs-target","#createModal",1,"fas","fa-pen",3,"click"],["data-bs-toggle","modal","data-bs-target","#deleteConfirm",1,"fas","fa-trash",3,"click"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Ob(2,"button",2),o.Vb("click",function(){return t.cleanForms()}),o.ic(3," + Agregar Nueva Pregunta "),o.Nb(),o.Nb(),o.Ob(4,"table",3),o.Ob(5,"thead",4),o.Ob(6,"tr"),o.Ob(7,"th"),o.ic(8,"Id"),o.Nb(),o.Ob(9,"th"),o.ic(10,"Pregunta"),o.Nb(),o.Ob(11,"th"),o.ic(12,"Respuesta"),o.Nb(),o.Ob(13,"th"),o.ic(14,"Opciones"),o.Nb(),o.Nb(),o.Nb(),o.Ob(15,"tbody"),o.hc(16,X,11,3,"tr",5),o.Nb(),o.Nb(),o.Nb(),o.Ob(17,"div",6),o.Ob(18,"div",7),o.Ob(19,"div",8),o.Ob(20,"div",9),o.Ob(21,"h5",10),o.ic(22),o.Nb(),o.Kb(23,"button",11),o.Nb(),o.Ob(24,"div",12),o.ic(25," Esta acci\xf3n no se puede deshacer. "),o.Nb(),o.Ob(26,"div",13),o.Ob(27,"button",14),o.ic(28,"No, Quiero conservarla"),o.Nb(),o.Ob(29,"button",15),o.Vb("click",function(){return t.delete()}),o.ic(30," Si, Eliminala! "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Ob(31,"div",16),o.Ob(32,"div",7),o.Ob(33,"div",8),o.Ob(34,"div",9),o.Ob(35,"h5",17),o.ic(36),o.Nb(),o.Kb(37,"button",11),o.Nb(),o.Ob(38,"div",12),o.Ob(39,"form",18),o.Ob(40,"div",19),o.Ob(41,"label",20),o.ic(42,"Pregunta:"),o.Nb(),o.Kb(43,"input",21),o.Nb(),o.Ob(44,"div",22),o.Ob(45,"label",23),o.ic(46,"Respuesta:"),o.Nb(),o.Kb(47,"textarea",24),o.Nb(),o.Nb(),o.Ob(48,"div",13),o.Ob(49,"button",25),o.Vb("click",function(){return t.submit()}),o.ic(50),o.Nb(),o.Ob(51,"button",14),o.ic(52," Cerrar "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(16),o.ac("ngForOf",t.questions),o.yb(6),o.kc("\xbfEstas apunto de eliminar la pregunta: ",t.selectedQuestion.question,"?"),o.yb(14),o.jc(t.editFlag?"Editando Pregunta":"Nueva Pregunta"),o.yb(3),o.ac("formGroup",t.form),o.yb(10),o.ac("disabled",t.form.invalid),o.yb(1),o.kc(" ",t.editFlag?"Actualizar":"Guardar"," "))},directives:[n.i,b.q,b.i,b.e,b.b,b.h,b.d],styles:[".wrapper[_ngcontent-%COMP%]{overflow-x:auto}.img-container[_ngcontent-%COMP%]{height:7rem}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:contain;width:100%}select[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{margin-right:1rem}small[_ngcontent-%COMP%]{color:#e62121}span[_ngcontent-%COMP%]{background:grey;font-size:.875rem;margin:.125rem}.options[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.25rem;margin:0 .5rem}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}.images[_ngcontent-%COMP%]{cursor:pointer;display:flex;height:12rem;justify-content:center;margin:.5rem;position:relative;width:100%}.images[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{color:#e62121}.images[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;left:0;margin:15% auto;position:absolute;right:0;text-align:center}.images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:contain;width:100%}.pagination[_ngcontent-%COMP%]{align-items:center;display:flex;margin:1rem 0;-webkit-user-select:none;user-select:none}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 .5rem;width:3rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.5rem;margin-left:.5rem}.pagination[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#707070}.header[_ngcontent-%COMP%]{display:flex;padding:1rem}.header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 2rem}.header[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{margin-left:auto}"]}),e})();function U(e,t){if(1&e){const e=o.Pb();o.Ob(0,"li",12),o.Vb("click",function(){o.ec(e);const i=t.index;return o.Xb().selectMenu(i)}),o.Ob(1,"a",13),o.ic(2),o.Nb(),o.Nb()}if(2&e){const e=t.$implicit,i=t.index,n=o.Xb();o.yb(1),o.Bb("active",n.currentMenu===n.menuItems[i]),o.yb(1),o.jc(e)}}function Q(e,t){if(1&e){const e=o.Pb();o.Ob(0,"app-articles",14),o.Vb("articleRefresh",function(t){return o.ec(e),o.Xb().getArticles(t)})("searchDetected",function(t){return o.ec(e),o.Xb().saveSearch(t)}),o.Nb()}if(2&e){const e=o.Xb();o.ac("articles",e.articleResponse.response)("maxPage",e.articleResponse.maxPage?e.articleResponse.maxPage:1)("search",e.search)("page",e.articleResponse.page?e.articleResponse.page:1)}}function H(e,t){1&e&&o.Kb(0,"app-users")}function W(e,t){1&e&&o.Kb(0,"app-tags")}function Y(e,t){1&e&&o.Kb(0,"app-promotions")}function Z(e,t){1&e&&o.Kb(0,"app-carousels")}function ee(e,t){1&e&&o.Kb(0,"app-purchases")}function te(e,t){1&e&&o.Kb(0,"app-shipping")}function ie(e,t){1&e&&o.Kb(0,"app-questions")}function ne(e,t){1&e&&(o.Ob(0,"h2"),o.ic(1,"null"),o.Nb())}const ae=[{path:"",component:(()=>{class e{constructor(e,t,i,n,a){this.crud=e,this.storage=t,this.router=i,this.alert=n,this.loader=a,this.jwt="",this.authorize=!1,this.articleResponse={page:0,maxPage:0,response:[]},this.search="",this.menuItems=["Articulos","Usuarios","Tags","Promocionales","Carrusel","Compras","Tabla de Entregas","Preguntas Frecuentes"],this.currentMenu=this.menuItems[0]}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){this.loader.beginLoad(),this.jwt=this.storage.getKey(),this.jwt||(yield this.negateAccess()),yield this.validateAdminRol().then(e=>{e.response&&(this.authorize=!0)}).finally(()=>{this.authorize||this.negateAccess()}),this.loader.endLoad()})}negateAccess(){return Object(a.a)(this,void 0,void 0,function*(){this.loader.endLoad(),this.alert.pushAlert({type:"danger",message:"No tienes permiso para acceder a la pagina"}),yield this.router.navigate(["/"])})}validateAdminRol(){return Object(a.a)(this,void 0,void 0,function*(){return this.crud.setEndpoint("auth/admin"),this.crud.setBearer(this.jwt),this.crud.httpGet().toPromise()})}selectMenu(e){this.currentMenu=this.menuItems[e]}getArticles(e){this.articleResponse=e}saveSearch(e){this.search=e}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(s.a),o.Jb(r.a),o.Jb(c.b),o.Jb(l.a),o.Jb(d.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-admin-panel"]],decls:19,vars:10,consts:[[1,"navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarTogglerDemo01","aria-controls","navbarTogglerDemo01","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarTogglerDemo01",1,"collapse","navbar-collapse"],[1,"navbar-brand"],[1,"navbar-nav","mr-auto"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"articles","maxPage","search","page","articleRefresh","searchDetected",4,"ngSwitchCase"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"nav-item",3,"click"],[1,"nav-link"],[3,"articles","maxPage","search","page","articleRefresh","searchDetected"]],template:function(e,t){1&e&&(o.Ob(0,"nav",0),o.Ob(1,"div",1),o.Ob(2,"button",2),o.Kb(3,"span",3),o.Nb(),o.Ob(4,"div",4),o.Ob(5,"a",5),o.ic(6,"ADMIN PANEL"),o.Nb(),o.Ob(7,"ul",6),o.hc(8,U,3,3,"li",7),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Mb(9,8),o.hc(10,Q,1,4,"app-articles",9),o.hc(11,H,1,0,"app-users",10),o.hc(12,W,1,0,"app-tags",10),o.hc(13,Y,1,0,"app-promotions",10),o.hc(14,Z,1,0,"app-carousels",10),o.hc(15,ee,1,0,"app-purchases",10),o.hc(16,te,1,0,"app-shipping",10),o.hc(17,ie,1,0,"app-questions",10),o.hc(18,ne,2,0,"h2",11),o.Lb()),2&e&&(o.yb(8),o.ac("ngForOf",t.menuItems),o.yb(1),o.ac("ngSwitch",t.currentMenu),o.yb(1),o.ac("ngSwitchCase",t.menuItems[0]),o.yb(1),o.ac("ngSwitchCase",t.menuItems[1]),o.yb(1),o.ac("ngSwitchCase",t.menuItems[2]),o.yb(1),o.ac("ngSwitchCase",t.menuItems[3]),o.yb(1),o.ac("ngSwitchCase",t.menuItems[4]),o.yb(1),o.ac("ngSwitchCase",t.menuItems[5]),o.yb(1),o.ac("ngSwitchCase",t.menuItems[6]),o.yb(1),o.ac("ngSwitchCase",t.menuItems[7]))},directives:[n.i,n.k,n.l,n.m,x,A,E,$,q,G,J,R],styles:["nav[_ngcontent-%COMP%]{background:#ececec;padding:.5rem 1rem}li[_ngcontent-%COMP%]{cursor:pointer}.active[_ngcontent-%COMP%]{text-decoration:underline}"]}),e})(),canActivate:[(()=>{class e{constructor(e){this.storage=e}canActivate(e,t){return!!this.storage.getKey()}}return e.\u0275fac=function(t){return new(t||e)(o.Sb(r.a))},e.\u0275prov=o.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]}];let oe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({imports:[[n.b,c.e.forChild(ae),b.f,b.n]]}),e})()}}]);